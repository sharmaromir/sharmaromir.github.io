---
import { menuLinks } from "@/site-config";

import Search from "../Search.astro";
import ThemeToggle from "../ThemeToggle.astro";

const url = new URL(Astro.request.url);
---

<header class="group relative mb-28 flex items-center sm:ps-[4.5rem]" id="main-header">
	<div class="flex sm:flex-col">
		<a
			aria-current={url.pathname === "/" ? "page" : false}
			class="inline-flex items-center grayscale hover:filter-none sm:relative sm:inline-block"
			href="/"
		>
			<svg
				aria-hidden="true"
				class="me-3 h-10 w-6 sm:absolute sm:start-[-4.5rem] sm:me-0 sm:h-20 sm:w-12"
				fill="none"
				focusable="false"
				viewBox="0 0 272 480"
				xmlns="http://www.w3.org/2000/svg"
			>
				<title>Logo</title> 
				<image xlink:href="data:image/png;base64,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" x="0" y="0" width="312" height="312"/>
                  	
			</svg>
			<span class="text-xl font-bold sm:text-2xl">Romir Sharma</span>
		</a>
		<nav
			aria-label="Main menu"
			class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-bgColor/[.85] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:-ms-4 sm:mt-1 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
			id="navigation-menu"
		>
			{
				menuLinks.map((link) => (
					<a
						aria-current={url.pathname === link.path ? "page" : false}
						class="px-4 py-4 underline-offset-2 sm:py-0 sm:hover:underline"
						data-astro-prefetch
						href={link.path}
					>
						{link.title}
					</a>
				))
			}
		</nav>
	</div>
	<Search />
	<ThemeToggle />
	<mobile-button>
		<button
			aria-expanded="false"
			aria-haspopup="menu"
			aria-label="Open main menu"
			class="group relative ms-4 h-7 w-7 sm:invisible sm:hidden"
			id="toggle-navigation-menu"
			type="button"
		>
			<svg
				aria-hidden="true"
				class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
				fill="none"
				focusable="false"
				id="line-svg"
				stroke="currentColor"
				stroke-width="1.5"
				viewBox="0 0 24 24"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap="round" stroke-linejoin="round"
				></path>
			</svg>
			<svg
				aria-hidden="true"
				class="absolute start-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
				class="text-accent"
				fill="none"
				focusable="false"
				id="cross-svg"
				stroke="currentColor"
				stroke-width="1.5"
				viewBox="0 0 24 24"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"></path>
			</svg>
		</button>
	</mobile-button>
</header>

<script>
	import { toggleClass } from "@/utils";

	class MobileNavBtn extends HTMLElement {
		private headerEl: HTMLElement;
		private menuOpen: boolean;
		private mobileButtonEl: HTMLButtonElement;

		toggleMobileMenu = () => {
			toggleClass(this.headerEl, "menu-open");
			this.menuOpen = !this.menuOpen;
			this.mobileButtonEl.setAttribute("aria-expanded", this.menuOpen.toString());
		};

		constructor() {
			super();
			this.headerEl = document.getElementById("main-header")!;
			this.mobileButtonEl = this.querySelector("button") as HTMLButtonElement;
			this.menuOpen = false;

			this.mobileButtonEl.addEventListener("click", this.toggleMobileMenu);
		}
	}

	customElements.define("mobile-button", MobileNavBtn);
</script>
